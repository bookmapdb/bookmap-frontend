<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BookMap — 도서 등록</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 20px; background: #fafafa; }
    h1 { font-size: 22px; }
    form { display: flex; flex-direction: column; gap: 12px; max-width: 400px; }
    label { font-weight: bold; }
    input, button {
      padding: 8px; border: 1px solid #ccc; border-radius: 6px;
    }
    button {
      background: #1a73e8; color: white; font-weight: bold; cursor: pointer;
    }
    button:hover { background: #1558c0; }
  </style>
</head>
<body>
  <h1>도서 등록</h1>
  <form id="bookForm">
    <label>제목 <input type="text" name="title" required /></label>
    <label>저자 <input type="text" name="author" required /></label>
    <label>출판사 <input type="text" name="publisher" required /></label>
    <button type="submit">등록하기</button>
  </form>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbygL5W_rVDTMkPIjLiSjDVN5nxRaZgHTIW3vbJgTgOL_Z_IwLF4k97VEd1bQNfxqAs1_A/exec";

    document.getElementById("bookForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const params = new URLSearchParams();
      formData.forEach((v, k) => params.append(k, v));
      params.append("action", "add");

      const res = await fetch(API_URL + "?" + params.toString());
      const result = await res.json();
      if (result.success) {
        alert("✅ 도서가 등록되었습니다! (자동 승인)");
        e.target.reset();
      } else {
        alert("❌ 등록 실패: " + (result.error || "알 수 없는 오류"));
      }
    });
  </script>
</body>
</html>
